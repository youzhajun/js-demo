# 事件的传播机制

js 事件的传播机制分为三个阶段：捕获阶段、目标阶段、冒泡阶段

1.  捕获阶段：在目标元素之前，从最外层元素向内传播，直到目标元素，此时触发捕获阶段的事件处理程序
2.  目标阶段：目标元素触发目标阶段的事件处理程序
3.  冒泡阶段：在目标元素之后，从目标元素向外传播，直到最外层元素，此时触发冒泡阶段的事件处理程序

![img](./img/image.png 'note')

如何在捕获阶段进行事件处理？

```
div.addEventListener('click', function(){}, true)
```

在目标阶段进行事件处理？

```
document.body.onclick = function (e) {}
```

在冒泡阶段进行事件处理？

```
document.body.addEventListener('click', function (e) {}, false)
```

## 如何阻止事件冒泡？

### 为何要阻止事件冒泡？

当一个 html 元素中的子元素与父元素都绑定了同一个事件时，如果子元素触发了事件，就会导致父元素也触发了事件，而此时我们希望只触发子元素的事件，此时就需要阻止事件冒泡。

### 阻止事件冒泡

事件处理函数

```
function handler(e) {
    e.stopPropagation() // 阻止冒泡
    e.target // 获取触发事件的元素
    e.tagName // 获取触发事件的元素标签名
}
```

## 事件冒泡有什么应用场景

1. 需要 for 循环 html 元素并给所有元素添加同一个事件处理函数时，可以取巧利用事件冒泡 给父元素添加事件处理函数
